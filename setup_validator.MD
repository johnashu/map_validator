# map_validator

**Building atlas requires **

- git
- Go (version 1.14 or later)
- C compiler

# Update & Install Dependencies
apt update && apt upgrade -y
apt install git
apt install make

# Install Go Lang

- download
wget https://golang.org/dl/go1.18.5.linux-amd64.tar.gz

- unzip
tar -xzf go1.18.5.linux-amd64.tar.gz -C /usr/local/

- Adjust path variable for GO

sudo nano /etc/profile

- Add the following paths at the end of the file.

export PATH=$PATH:/usr/local/go/bin
export PATH=$PATH:/atlas/build/bin
export GOPATH=$HOME

- To save changes, press ‘Ctrl+O’ and then exit from this file by pressing ‘Ctrl+X’.

- Activate the PATH of the environment variable by executing the below-mentioned command:

source /etc/profile

- Export GoPAth
export GOPATH=$HOME

# Clone Repo

cd <DIR>
git clone https://github.com/mapprotocol/atlas.git && cd atlas


# Compile 

make atlas
make marker

**The file generated by build is in the `build/bin` directory**

- add binaries to PAth

export PATH=$PATH:/atlas/build/bin

# Create account

./marker createAccount --rpcaddr 127.0.0.1 --rpcport 7445 --keystore /Users/alex/data/atlas-1/keystore/UTC--2022-06-14T05-46-17.312327000Z--73bc690093b9dd0400c91886184a60cc127b2c33 --password "" --namePrefix "validator"

# Lock MAP in Validator - Stake
./marker lockedMAP --rpcaddr 127.0.0.1 --rpcport 7445 --keystore /Users/alex/data/atlas-1/keystore/UTC--2022-06-14T05-46-17.312327000Z--73bc690093b9dd0400c91886184a60cc127b2c33 --password "" --lockedNum 1000000

# Authorize
Signer Account: 0x98efa292822eb7b3045c491e8ae4e82b3b1ac005 
Signer PrivateKey: 8df920b696ef3f5fdcf01624405ea8236b2b4907766ad61d42ce877df05f8bca

./marker authorizeValidatorSigner 127.0.0.1 --rpcport 7445 --keystore /Users/alex/data/atlas-1/keystore/UTC--2022-06-14T05-46-17.312327000Z--73bc690093b9dd0400c91886184a60cc127b2c33 --password "" --signerPriv 8df920b696ef3f5fdcf01624405ea8236b2b4907766ad61d42ce877df05f8bca

# register
./marker register --rpcaddr 127.0.0.1 --rpcport 7445 --keystore /Users/alex/data/atlas-1/keystore/UTC--2022-06-14T05-46-17.312327000Z--73bc690093b9dd0400c91886184a60cc127b2c33 --password "" --signerPriv 8df920b696ef3f5fdcf01624405ea8236b2b4907766ad61d42ce877df05f8bca --commission 400000


# Verify
verify whether it has become a validator.
./marker getTotalVotesForEligibleValidators --rpcaddr 127.0.0.1 --rpcport 7445

# Vote
We can use our validator account to vote for ourselves, or we can let other validators or voters vote for ourselves. Below we will create a voter account and vote for our validator

# Create account
./marker createAccount --rpcaddr 127.0.0.1 --rpcport 7445 --keystore /Users/alex/data/atlas-1/keystore/UTC--2022-06-14T05-47-17.091118000Z--19c560de95c222ac4b0ad3093d66ef1fe75640f4 --password "" --namePrefix "voter"


# Locked MAP
./marker lockedMAP --rpcaddr 127.0.0.1 --rpcport 7445 --keystore /Users/alex/data/atlas-1/keystore/UTC--2022-06-14T05-47-17.091118000Z--19c560de95c222ac4b0ad3093d66ef1fe75640f4 --password "" --lockedNum 100000

# Vote
The number of votes cannot be greater than the number locked in the previous step.
./marker vote --rpcaddr 127.0.0.1 --rpcport 7445 --keystore /Users/alex/data/atlas-1/keystore/UTC--2022-06-14T05-47-17.091118000Z--19c560de95c222ac4b0ad3093d66ef1fe75640f4 --password "" --validator 0x73bc690093b9dd0400c91886184a60cc127b2c33 --voteNum 100000

# Verify
Let's verify that our vote was successful.
./marker getTotalVotesForEligibleValidators --rpcaddr 127.0.0.1 --rpcport 7445




